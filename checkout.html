<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Checkout - SPICEAURA</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css"> <!-- reuse your styles -->
  <style>
    .checkout-item { display:flex; align-items:center; justify-content:space-between; padding:10px 0; border-bottom:1px solid #eee; }
    .checkout-item img{ width:48px; height:48px; object-fit:cover; margin-right:10px; }
    .payment-methods .form-check { margin-bottom:8px; }
  </style>
</head>
<body>
  <div class="container my-5">
    <h2 class="mb-4">Checkout</h2>

    <div id="checkout-items"></div>

    <div class="text-end my-3">
      <h4>Total: ₹<span id="checkout-total">0</span></h4>
    </div>

    <div class="payment-methods mb-3">
      <h5>Choose Payment Method</h5>
      <div class="form-check">
        <input class="form-check-input" type="radio" id="cod" name="payment" checked>
        <label class="form-check-label" for="cod">Cash on Delivery</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="radio" id="upi" name="payment">
        <label class="form-check-label" for="upi">UPI (Demo)</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="radio" id="card" name="payment">
        <label class="form-check-label" for="card">Credit / Debit Card (Demo)</label>
      </div>
    </div>

    <button id="place-order" class="btn btn-success w-100">Place Order</button>
  </div>

  <script>
    (function(){
      const KEY = 'spiceaura_cart_v1';
      const checkoutItemsEl = document.getElementById('checkout-items');
      const checkoutTotalEl = document.getElementById('checkout-total');
      const cart = JSON.parse(localStorage.getItem(KEY)) || [];

      if (!cart.length) {
        checkoutItemsEl.innerHTML = '<p>Your cart is empty.</p>';
        checkoutTotalEl.textContent = '0';
      } else {
        let total = 0;
        checkoutItemsEl.innerHTML = cart.map(item => {
          const lineTotal = (item.price * (item.qty || item.quantity || item.quantity === 0 ? item.qty : item.quantity || item.quantity || 1));
          total += lineTotal;
          return `
            <div class="checkout-item">
              <div class="d-flex align-items-center">
                ${item.image ? `<img src="${item.image}" alt="${item.name}" onerror="this.style.display='none'">` : ''}
                <div>
                  <strong>${item.name}</strong><br>
                  <small>₹${Number(item.price).toFixed(2)} × ${item.qty || item.quantity || 1}</small>
                </div>
              </div>
              <div>₹${(lineTotal).toFixed(2)}</div>
            </div>
          `;
        }).join('');
        checkoutTotalEl.textContent = total.toFixed(2);
      }

      document.getElementById('place-order').addEventListener('click', () => {
        if (!cart.length) return alert('Cart is empty.');
        const selected = document.querySelector('input[name="payment"]:checked').id;
        alert('Order placed! Payment method: ' + selected + '\nTotal: ₹' + checkoutTotalEl.textContent);
        localStorage.removeItem(KEY);
        window.location.href = 'index.html';
      });
    })();
  </script>

</body>
</html>